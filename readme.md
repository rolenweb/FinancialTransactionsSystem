# Financial transactions system
Архитектурно приложение состоит из 3 слоев: доменный, сервисный и инфраструктурный

>**Application**
> > **UseCases** Следуя первому принципу солида реализуем на каждую операцию отдельный use case
> > > **DepositMoneyUseCase.php** (Пополнение баланса)
> > > > В конструкторе используя DI(реализация IoC) инжектим интерфейс репозитория(5 принцип солида). Также здесь реализуется шаблон Creator(GRASP). В реальном приложение use case в паре с Command реализует шаблон Command.
> >  
> > > **WithdrawMoneyUseCase.php** (Снятие денег) Реализация такая же как и use case выше
> > 
> > > **TransferMoneyUseCase.php** (Перевод со счета на счет) Реализация такая же как и use case выше
> >
> > **Services** (Шаблоны теже что и в use cases)
> >
> > >**AccountService.php** 
> > > > **findAll()** возращает все счета в системе
> > >
> > > > **findBalanceByAccount** возвращает баланс счета
> 
> > >**TransactionService.php**
> > > > findByAccountOrderByCommentAsc() возвращает транзакции для счета сортированые по коментариям
> > >
> > > > findByAccountOrderByDueDateAsc() возвращает транзакции для счета сортированые по дате
> > 
> **Domain** (В доменной области определяем entities и value objects)
> >**Entities**
> > > **Account.php** (Добавляем проперти и два метода для увеличение баланса и уменьшения)
> >
> > > **Transaction.php** 
> >
> > **Repositories** (Следую пятому принципу солида, создаем интерфесы репозиторием, чтобы не за висеть от конкретной реализации)
> > > **AccountRepositoryInterface.php**
> > Интерфейс определяет два метода.
> > > > **findAll()** возвращает все счета в системе
> > >
> > > > **findBalanceByAccount()** возвращает баланс для счета
> >
> > > **TransactionRepositoryInterface.php**
> > > Интерфейс определяет 4 метода. А уже в реализиции в зависимости от стора пишем реализацию.
> > > > **add** добавляет транзакцию в репозиторий
> > >
> > > > **addBatch** - позволяет добавить несколько странзакций за раз. В случае с транзакцией трансфера между счетами нам нужно обрабоать две транзакции для обеспечения целостности данных.
> > >
> > > > **findAllByAccountOrderByCommentAsc** - возвращает транзакции для выбранного счета и отсортированые по коментариям по алфавиту.
> > >
> > > > **findAllByAccountOrderByDueDateAsc**  - возвращает транзакции для выбранного счета и отсортированые дате.
> 
> 
> **Infrastructure**
> > **AccountRepository.php** реализация интерфеса репозитория, как раз тут пишем сами методы в зависимтости от хранилища
> >
> > **TransactionRepository.php** реализация интерфеса репозитория, как раз тут пишем сами методы в зависимтости от хранилища
> 
> Test
> > тут тесты пишем